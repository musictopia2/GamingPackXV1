@inherits KeyComponentBase 
@using System.Drawing;
@using static DominosMexicanTrainCP.Logic.TrainStationBoardProcesses
@using BasicGamingUIBlazorLibrary.BasicControls.GameBoards 
@* risking using my custom frame instead of just fieldset (?) *@

<CascadingValue Value="this">
    <BaseFrameBlazor>
        <svg width="@GetWidth" height="100%" viewBox="0 0 750 750">
            <rect x="225" y="225" width="300" height="300" fill="lightgray" />
            @if (GameBoard!.PrivateList.Count == 0)
            {
                return;
            }
            <BasicDominoBlazor @key="GameBoard!.CenterDomino" PartOfBoard="true" D="MexicanDomino" Location="new PointF(300, 349)" LongestSize="@GetLongestSize" DeckObject="GameBoard!.CenterDomino" />
            @*<DominoComponent X="300" Y="349" LongestSize="@GetLongestSize" Rotated="false" HighestDomino="12" CurrentFirst="12" CurrentSecond="12" />*@

            @foreach (var train in GameBoard.TrainList)
            {
                PrivateTrain privateTrain = GameBoard.PrivateList[train.Value.Index];
                foreach (var domino in train.Value.DominoList)
                {
                    <BasicDominoBlazor @key="domino" D="MexicanDomino" PartOfBoard="true" DeckObject="domino" LongestSize="@GetLongestSize" Location="domino.Location" />
                }

                @*<rect width="50" height="50" x="@privateTrain.TrainArea.X" y="@privateTrain.TrainArea.Y" fill="aqua" />*@

                <TrainPieceBlazor Self="@IsSelf(train.Key)"
                                  PositionInfo="privateTrain"
                                  Player="train.Key"
                                  @key="train.Value"
                                  TrainInfo="train.Value"
                                  TrainClicked="TrainClicked"
                                  WasDouble="GameBoard.Satisfy > 0"
                                  Satisfy="Satisfy(train.Key)" />
            }


            @* try to do this last *@
            @if (GameBoard.GetAnimation.AnimationGoing)
            {

                <UpdatePortionBoard>
                    <BasicDominoBlazor
                                       @key="GetKey"
                                       PartOfBoard="true"
                                       D="MexicanDomino"
                                       LongestSize="@GetLongestSize"
                                       Location="GameBoard.GetAnimation.CurrentLocation"
                                       DeckObject="GameBoard.GetMovingDomino"
                                       />


                </UpdatePortionBoard>

            }


        </svg>
    </BaseFrameBlazor>
</CascadingValue>